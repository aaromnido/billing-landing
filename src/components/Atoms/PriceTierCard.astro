---
import IconTick from "./IconTick.astro";
import pricingData from '../../data/pricingData.json'
import CtaButtonSecondaryLarge from "./CtaButtonSecondaryLarge.astro";
import CtaButtonPrimaryLarge from "./CtaButtonPrimaryLarge.astro";
const PLANS = pricingData;
---

<section x-data="{ planAnual: true }" x-cloak class="pricing-table">
    <header class="text-center">
        <label class="relative inline-flex items-center mb-5 cursor-pointer">
            <input 
                type="checkbox" 
                value="" 
                class="sr-only peer" 
                checked>
            <div 
                x-on:click="planAnual = !planAnual"
                class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:w-5 after:h-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
            <span class="ms-3 text-sm font-medium text-gray-900 dark:text-gray-300">
                Anual
            </span>
        </label>
    </header>
    <article 
        class="pricing-table-container">
    
        {
            PLANS.map(({ plan, descripcion, precioPorAno, precioPorMes, clientes, usuariosBillin, productos, escaneadoInteligente, seguimientoDeDocumentos, presupuestosYFacturas, facturasElectronicas, diseñosDeFacturas, personalizacionDeComunicaciones, facturasConGestor, soporte, appMovil, integracionConShopify, integracionConApiPublica, popular }) => (
                <div class="pricing-table-card">
                    <div class={`${popular ? 'bg-blue-600 text-white' : 'bg-[var(--sky-light)]'} pricing-table-card-container`}>
                        <header class="pb-0">
                            <h3 class="mb-4 text-2xl font-semibold">{plan} + {popular}</h3>
                            <p class="font-light text-lg md:text-sm">{descripcion}</p>
                            <div class="flex justify-center items-baseline my-8">
                                <span x-show="planAnual" class="mr-2 text-5xl font-extrabold">{precioPorAno}€</span>
                                <span x-show="!planAnual" class="mr-2 text-5xl font-extrabold">{precioPorMes}€</span>
                                <span>/MES + IVA</span>
                            </div>
                            <div class="flex items-center justify-center mb-8">
                                {popular ? <CtaButtonPrimaryLarge /> : <CtaButtonSecondaryLarge />}
                            </div>
                        </header>
                        <!-- ** List ** -->
                        <ul role="list" class="space-y-4 text-left text-pretty">
                            {clientes &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{clientes}</span>
                                </li>
                            }
                            {usuariosBillin &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{usuariosBillin}</span>
                                </li>
                            }
                            {productos &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{productos}</span>
                                </li>
                            }
                            {escaneadoInteligente &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{escaneadoInteligente}</span>
                                </li>
                            }
                            {seguimientoDeDocumentos &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{seguimientoDeDocumentos}</span>
                                </li>
                            }
                            {presupuestosYFacturas &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{presupuestosYFacturas}</span>
                                </li>
                            }
                            {facturasElectronicas &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{facturasElectronicas}</span>
                                </li>
                            }
                            {diseñosDeFacturas &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{diseñosDeFacturas}</span>
                                </li>
                            }
                            {personalizacionDeComunicaciones &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{personalizacionDeComunicaciones}</span>
                                </li>
                            }
                            {facturasConGestor &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{facturasConGestor}</span>
                                </li>
                            }
                            {soporte &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{soporte}</span>
                                </li>
                            }
                            {appMovil &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{appMovil}</span>
                                </li>
                            }
                            {integracionConShopify &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{integracionConShopify}</span>
                                </li>
                            }
                            {integracionConApiPublica &&
                                <li class="pricing-table-card-items">
                                    <IconTick />
                                    <span>{integracionConApiPublica}</span>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
    
            ))
        }
    
    </article>
</section>

<style>
    .pricing-table-container{
        @apply md:grid md:grid-cols-3 gap-6;
    }
    .pricing-table-card{
        @apply mb-12 md:mb-0 rounded-[16px] p-[2px] overflow-hidden;
        background-image: linear-gradient(to bottom right, var(--green), var(--purple));
    }
    .pricing-table-card-container{
        @apply flex flex-col p-6 mx-auto max-w-lg h-full text-center rounded-[14px] xl:p-8 w-[100%]
    }
    .pricing-table-card-items{
        @apply flex items-start space-x-4;
    }
</style>